<html>
    <style>
        body {background-color: powderblue;}
        h1{
            color: blue;
        }
        p{
            color:red;
        }
        .selection{
            text-align:left;
            margin-left: 45%;
        }
        .header{
            text-align:right;
        }
    </style>
    <head>
        <script src="node_modules/jquery/dist/jquery.min.js"></script>
        <title>Logged in Page</title>
    </head>
    <body>
        <div class="wrap">
            <div class="header">
                <img src="">Img</img>
                <br>
                <button id="signOut" onclick="signOut();">Sign Out</button>
            </div>
            <div class="selection">
                <form action="/action_page.php">
                    <label for="gender">Gender:</label>
                    <select name="gender" id="gender">
                        <option value="1">Male</option>
                        <option value="2">Female</option>
                    </select>
                    <br>
                    <br>
                    <label for="tidiness">Choose Tidiness Level:</label>
                    <select name="tidinesslevel" id="tidiness">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                    </select>
                    <br>
                    <br>
                    <label for="noise">Choose Noise Level:</label>
                    <select name="noiselevel" id="noise">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                    </select>
                    <br>
                    <br>
                    <label for="pet">Pet:</label>
                    <select name="pet" id="pet">
                        <option value="1">Friendly</option>
                        <option value="2">Not Friendly</option>
                        <option value="3">Negotiable</option>
                    </select>
                    <br>
                    <br>
                    <label for="visitor">Visitor:</label>
                    <select name="Clean_level" id="clean">
                        <option value="1">Welcomed</option>
                        <option value="2">Welcomed But Not Over Night</option>
                        <option value="2">Not Welcomed</option>
                        <option value="3">Negotiable</option>
                    </select>
                    <br>
                    <br>
                    <label for="sleep">Sleeping Time:</label>
                    <select name="sleeptime" id="sleep">
                        <option value="1">Before 10</option>
                        <option value="2">10-12</option>
                        <option value="3">12-2</option>
                        <option value="3">After 2</option>
                    </select>
                    <br>
                    <br>
                    <label for="wake">Wake Up Time:</label>
                    <select name="waketime" id="wake">
                        <option value="1">Before 7</option>
                        <option value="2">7-9</option>
                        <option value="3">9-12</option>
                        <option value="3">After 12</option>
                    </select>
                    <br>
                    <br>
                    <br>
                    <input type="submit" value="Submit">
                  </form>
                
            </div>
        </div>
        
        

    </body>

    <script>
        this.init();

        function init() {
            if (typeof(Storage) !== "undefined" && localStorage.uEmail && localStorage.uPwd && localStorage.sessionKey) {
                var user_info = document.createElement("H1");
                user_info.innerText = "You are logged in as " + localStorage.uEmail;
                document.getElementById("main_body").appendChild(user_info);
            } else {
                console.log("Your browser doesn't support web storage...");
                return;
            }

            // make an ajax post
            $.ajax({
                type: "POST",
                url: "/listcounters",
                dataType: "json",
                data: JSON.stringify({ "uid": localStorage.uId, "uEmail": localStorage.uEmail, "sessionKey": localStorage.sessionKey }),
                success: this.listCountersResponse
            });
        }

        function listCountersResponse(data) {
            // TODO: find a way to list all mData
        }

        function signOut() {
            var auth2 = gapi.auth2.getAuthInstance();
            auth2.signOut().then(function () {
                console.log('User signed out.');
            });
        }

        function addCounter() {
            var init_count = document.getElementById("add_counter_value").value;
            if (init_count === "") {
                document.getElementById("add_counter_warning").style.display = 'block';
                return;
            }
            // make an ajax post
            $.ajax({
                type: "POST",
                url: "/counters",
                dataType: "json",
                data: JSON.stringify({ "uid": localStorage.uId, "uEmail": localStorage.uEmail, "sessionKey": localStorage.sessionKey, "value": init_count }),
                success: this.addCounterResponse
            });
        }

        function addCounterResponse(data) {
            if (data.mStatus === "ok") {
                location.reload();
            } else {
                console.log("Internal Error");
            }
        }
    </script>
</html>